@page
@model IndexModel
@{
    ViewData["Title"] = "Profilul meu";
    ViewData["ActivePage"] = ManageNavPages.Index;
}

<h2 class="mb-8 text-center text-4xl font-extrabold text-indigo-700">@ViewData["Title"]</h2>

<partial name="_StatusMessage" for="StatusMessage" />

<div class="mx-auto max-w-3xl rounded-2xl bg-white p-8 shadow-xl">

    <!-- POZA + NUMELE -->
    <div class="mb-8 flex flex-col items-center">
        <div class="relative">

            <!-- Imaginea de profil -->
            <img src="@(Model.PhotoBase64 ?? "/images/default-profile.png")"
                 alt="Photo"
                 class="h-32 w-32 rounded-full border-4 border-indigo-500 object-cover shadow-lg" />

        </div>

        <!-- Nume complet -->
        <h3 class="mt-4 text-2xl font-semibold text-gray-900">
            @Model.Input.FirstName @Model.Input.LastName
        </h3>

        <!-- Rolul utilizatorului -->
        <p class="mt-1 text-sm text-gray-600">
            Rol: <span class="font-medium">@Model.Input.Role</span>
        </p>
    </div>

    <form id="profile-form" method="post" enctype="multipart/form-data">

        <div asp-validation-summary="ModelOnly" class="mb-4 text-red-600" role="alert"></div>

        <!-- Upload poză -->
        <div class="mb-6">
            <label class="mb-1 block text-sm font-medium text-gray-700">Schimbă poza de profil</label>
            <input asp-for="Input.PhotoFile"
                   type="file"
                   accept="image/*"
                   class="block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" />
        </div>

        <!-- Email (read-only) -->
        <div class="mb-4">
            <label asp-for="Username" class="mb-1 block text-sm font-medium text-gray-700">Email</label>
            <input asp-for="Username"
                   class="mt-1 block w-full cursor-not-allowed rounded-md border border-gray-300 bg-gray-100 px-3 py-2 shadow-sm sm:text-sm"
                   disabled />
        </div>

        <!-- Nume + Prenume -->
        <div class="mb-4 grid grid-cols-1 gap-4 md:grid-cols-2">
            <div>
                <label asp-for="Input.FirstName" class="mb-1 block text-sm font-medium text-gray-700">Prenume</label>
                <input asp-for="Input.FirstName"
                       class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 sm:text-sm" />
            </div>
            <div>
                <label asp-for="Input.LastName" class="mb-1 block text-sm font-medium text-gray-700">Nume</label>
                <input asp-for="Input.LastName"
                       class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 sm:text-sm" />
            </div>
        </div>

        <!-- Telefon -->
        <div class="mb-4">
            <label asp-for="Input.PhoneNumber" class="mb-1 block text-sm font-medium text-gray-700">Număr de telefon</label>
            <input asp-for="Input.PhoneNumber"
                   class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 sm:text-sm" />
        </div>

        <!-- Rol -->
        <div class="mb-4">
            <label asp-for="Input.Role" class="mb-1 block text-sm font-medium text-gray-700">Rol</label>
            <input asp-for="Input.Role"
                   class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 sm:text-sm" />
        </div>

        <!-- Data nașterii -->
        <div class="mb-6">
            <label asp-for="Input.BirthDate" class="mb-1 block text-sm font-medium text-gray-700">Data nașterii</label>
            <input asp-for="Input.BirthDate"
                   type="date"
                   class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 sm:text-sm" />
        </div>

        <!-- Buton Salvare -->
        <button id="update-profile-button"
                type="submit"
                class="inline-flex w-full justify-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-lg hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-300">
            Salvează modificările
        </button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
